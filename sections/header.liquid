<header class="site-header-final">

  <div class="header__main-bar">
    
    <div class="main-bar__left">
      <h1 class="header__title">
        {{ shop.name | link_to: routes.root_url }}
      </h1>
    </div>

    <div class="main-bar__center">
      <div class="header__search">
        <form action="{{ routes.search_url }}" method="get">
          <input type="search" name="q" placeholder="Search...">
          <button type="submit">&#128269;</button>
        </form>
      </div>
    </div>

    <div class="main-bar__right">
      <a href="{{ routes.account_url }}" class="header__icon-link" aria-label="My Account">&#128100;</a>
      <a href="#wishlist" class="header__icon-link" aria-label="Wishlist">&#9825;</a>
      <a href="{{ routes.cart_url }}" class="header__icon-link" aria-label="Cart">&#128722;</a>
      <button type="button" class="menu-trigger" aria-controls="main-nav" aria-expanded="false" aria-label="Open menu">
        <span>&#9776;</span>
      </button>
    </div>

  </div>
  
  <nav class="main-nav-drawer" id="main-nav">
     {%- for link in section.settings.menu.links -%}
        <a href="{{ link.url }}">{{ link.title }}</a>
     {%- endfor -%}
  </nav>

</header>

{% schema %}
{
  "name": "Final Header",
  "settings": [
    {
      "type": "link_list",
      "id": "menu",
      "label": "Menu"
    }
  ]
}
{% endschema %}

<style>
  .site-header-final {
    background-color: #002D5B;
    color: white;
    padding: 0.75rem 2rem;
    border-bottom: 1px solid #ffffff20;
    position: relative;
  }
  .site-header-final a, .site-header-final button {
    text-decoration: none;
    color: inherit;
    background: none;
    border: none;
    cursor: pointer;
  }
  .header__main-bar {
    display: flex;
    align-items: center;
    gap: 2rem;
  }
  .main-bar__left {
    flex-shrink: 0;
  }
  .header__title {
    margin: 0;
    font-size: 2.5rem;
    font-weight: bold;
  }
  .main-bar__center {
    flex-grow: 1;
  }
  .header__search form {
    display: flex;
    width: 100%;
    max-width: 700px;
    margin: 0 auto;
  }
  .header__search input {
    width: 100%;
    border: 1px solid #ccc;
    background-color: #ffffff;
    color: #333333;
    border-radius: 25px 0 0 25px;
    padding: 0.75rem 1rem;
    font-size: 1rem;
  }
   .header__search input::placeholder {
    color: #888888;
  }
  .header__search button {
    background-color: #F58220;
    border-radius: 0 25px 25px 0;
    padding: 0 1.5rem;
    font-size: 1.2rem;
  }
  .main-bar__right {
    display: flex;
    align-items: center;
    gap: 1.75rem;
  }
  .header__icon-link, .menu-trigger {
    font-size: 1.8rem;
  }

  .main-nav-drawer {
    display: none;
    position: absolute;
    top: 100%;
    right: 0;
    width: 300px;
    max-width: 90vw;
    background-color: white;
    border: 1px solid #e0e0e0;
    box-shadow: -5px 5px 15px rgba(0,0,0,0.1);
    z-index: 20;
  }
  .main-nav-drawer.is-active {
    display: flex;
    flex-direction: column;
  }
  .main-nav-drawer a {
    color: #333;
    padding: 1rem 1.5rem;
    border-bottom: 1px solid #f0f0f0;
    font-weight: bold;
  }
  
  @media (max-width: 990px) {
    .site-header-final {
      padding: 0.75rem 1rem;
    }
    .header__title {
      font-size: 1.8rem;
    }
    .main-bar__center, .main-bar__right {
       display: none; 
    }
    .main-bar__left {
       flex-grow: 1;
       justify-content: space-between;
    }
    .menu-trigger {
       display: block;
       font-size: 1.5rem;
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const menuButton = document.querySelector('.menu-trigger');
    const mobileNav = document.getElementById('main-nav');

    if (menuButton && mobileNav) {
      menuButton.addEventListener('click', function(event) {
        event.stopPropagation();
        const isExpanded = menuButton.getAttribute('aria-expanded') === 'true';
        mobileNav.classList.toggle('is-active');
        menuButton.setAttribute('aria-expanded', !isExpanded);
      });
      
      document.addEventListener('click', function(event) {
        const isClickInside = mobileNav.contains(event.target) || menuButton.contains(event.target);
        if (!isClickInside && mobileNav.classList.contains('is-active')) {
          mobileNav.classList.remove('is-active');
          menuButton.setAttribute('aria-expanded', 'false');
        }
      });
    }
  });
</script>